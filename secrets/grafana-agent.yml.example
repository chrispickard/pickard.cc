# remove old grafana-agent.age and then
# copy and paste this file to the buffer opened by running
# nix run github:ryantm/agenix -- -e grafana-agent.age
# adding in the API key for passwords
integrations:
  node_exporter:
    enabled: true
  prometheus_remote_write:
    - basic_auth:
        password: ${age.secrets.grafana-agent.file}
        username: 285788
      url: https://prometheus-prod-10-prod-us-central-0.grafana.net/api/prom/push
loki:
  configs:
    - clients:
        - basic_auth:
            password: ${age.secrets.grafana-agent.file}
            username: 141865
          url: https://logs-prod-us-central1.grafana.net/api/prom/push
      name: integrations
      positions:
        filename: /tmp/positions.yaml
      target_config:
        sync_period: 10s
prometheus:
  configs:
    - name: integrations
      remote_write:
        - basic_auth:
            password: ${age.secrets.grafana-agent.file}
            username: 285788
          url: https://prometheus-prod-10-prod-us-central-0.grafana.net/api/prom/push
  global:
    scrape_interval: 60s
  wal_directory: /tmp/grafana-agent-wal
server:
  http_listen_port: 12345
